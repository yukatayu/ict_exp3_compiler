ORG 10 / Entry Point

 / > while loop MainLoop
XWH1MainLoop,
 / while (
    LDA N
SZA
BUN XWH2MainLoop
BUN XWH3MainLoop
 / ) {
XWH2MainLoop,

     / > beginning of CP
    CP,
        LDA IINIT
        STA I
        LDA IINIT
        CMA
        INC
        STA MI
        LDA I2INIT
        STA I2

         / > while loop CPLoop
        XWH1CPLoop,
         / while (
            LDA N
            STA NC1
            LDA I2
            STA NC2

             / > beginning of cnn0
            cnn0,
                LDA NC1
                STA T1
                LDA NC2
                STA T2

                 / > while loop CmpLoopcnn0
                XWH1CmpLoopcnn0,
                 / while (
                    LDA T1
                    STA TFLAG

                     / > if CmpT1cnn0
                     / if (
                        LDA T1
                    SZA
                    BUN XIF2CmpT1cnn0
                    BUN XIF1CmpT1cnn0
                     / ) {
                    XIF1CmpT1cnn0,
                        LDA T2
                        STA TFLAG
                     / }
                    XIF2CmpT1cnn0,
                     / < end of if CmpT1cnn0

                    LDA TFLAG
                SZA
                BUN XWH2CmpLoopcnn0
                BUN XWH3CmpLoopcnn0
                 / ) {
                XWH2CmpLoopcnn0,
                    LDA T1
                    CLE
                    CIL
                    STA T1
                    CLA
                    CIL
                    STA T3
                    LDA T2
                    CLE
                    CIL
                    STA T2
                    CLA
                    CIL
                    STA T4

                     / > if t3pt4is1cnn0
                     / if (
                        LDA T3
                        ADD T4
                        STA T3
                        LDA T3
                        CMA
                        INC
                        CMA
                        STA T3
                        LDA T3
                    SZA
                    BUN XIF2t3pt4is1cnn0
                    BUN XIF1t3pt4is1cnn0
                     / ) {
                    XIF1t3pt4is1cnn0,
                        LDA T4
                        STA CMPRES
                        BUN EndCp1Cp2cnn0
                     / }
                    XIF2t3pt4is1cnn0,
                     / < end of if t3pt4is1cnn0

                BUN XWH1CmpLoopcnn0
                 / }
                XWH3CmpLoopcnn0,
                 / < end of while loop CmpLoopcnn0

                CLA
                STA CMPRES
                EndCp1Cp2cnn0,
             / < end of cnn0

            LDA CMPRES
        SZA
        BUN XWH3CPLoop
        BUN XWH2CPLoop
         / ) {
        XWH2CPLoop,
            LDA N
            STA NC1
            LDA N
            STA NC2
            CLA
            STA IPTR
            LDA IPTR
            INC
            STA IPTR
            LDA I
            STA ISH
            LDA N
            STA ITMP

             / > while loop CPPre
            XWH1CPPre,
             / while (
                LDA ISH
                CIL
                CLA
                CIL
            SZA
            BUN XWH3CPPre
            BUN XWH2CPPre
             / ) {
            XWH2CPPre,
                LDA ISH
                CLE
                CIL
                STA ISH
                LDA IPTR
                CLE
                CIL
                STA IPTR
            BUN XWH1CPPre
             / }
            XWH3CPPre,
             / < end of while loop CPPre


             / > while loop CPMain
            XWH1CPMain,
             / while (
                LDA ISH
                STA NC1
                LDA I
                STA NC2

                 / > beginning of cnn2
                cnn2,
                    LDA NC1
                    STA T1
                    LDA NC2
                    STA T2

                     / > while loop CmpLoopcnn2
                    XWH1CmpLoopcnn2,
                     / while (
                        LDA T1
                        STA TFLAG

                         / > if CmpT1cnn2
                         / if (
                            LDA T1
                        SZA
                        BUN XIF2CmpT1cnn2
                        BUN XIF1CmpT1cnn2
                         / ) {
                        XIF1CmpT1cnn2,
                            LDA T2
                            STA TFLAG
                         / }
                        XIF2CmpT1cnn2,
                         / < end of if CmpT1cnn2

                        LDA TFLAG
                    SZA
                    BUN XWH2CmpLoopcnn2
                    BUN XWH3CmpLoopcnn2
                     / ) {
                    XWH2CmpLoopcnn2,
                        LDA T1
                        CLE
                        CIL
                        STA T1
                        CLA
                        CIL
                        STA T3
                        LDA T2
                        CLE
                        CIL
                        STA T2
                        CLA
                        CIL
                        STA T4

                         / > if t3pt4is1cnn2
                         / if (
                            LDA T3
                            ADD T4
                            STA T3
                            LDA T3
                            CMA
                            INC
                            CMA
                            STA T3
                            LDA T3
                        SZA
                        BUN XIF2t3pt4is1cnn2
                        BUN XIF1t3pt4is1cnn2
                         / ) {
                        XIF1t3pt4is1cnn2,
                            LDA T4
                            STA CMPRES
                            BUN EndCp1Cp2cnn2
                         / }
                        XIF2t3pt4is1cnn2,
                         / < end of if t3pt4is1cnn2

                    BUN XWH1CmpLoopcnn2
                     / }
                    XWH3CmpLoopcnn2,
                     / < end of while loop CmpLoopcnn2

                    CLA
                    STA CMPRES
                    EndCp1Cp2cnn2,
                 / < end of cnn2

                LDA CMPRES
            SZA
            BUN XWH3CPMain
            BUN XWH2CPMain
             / ) {
            XWH2CPMain,

                 / > if DivCmp
                 / if (
                    LDA ITMP
                    STA NC1
                    LDA ISH
                    STA NC2

                     / > beginning of cnn3
                    cnn3,
                        LDA NC1
                        STA T1
                        LDA NC2
                        STA T2

                         / > while loop CmpLoopcnn3
                        XWH1CmpLoopcnn3,
                         / while (
                            LDA T1
                            STA TFLAG

                             / > if CmpT1cnn3
                             / if (
                                LDA T1
                            SZA
                            BUN XIF2CmpT1cnn3
                            BUN XIF1CmpT1cnn3
                             / ) {
                            XIF1CmpT1cnn3,
                                LDA T2
                                STA TFLAG
                             / }
                            XIF2CmpT1cnn3,
                             / < end of if CmpT1cnn3

                            LDA TFLAG
                        SZA
                        BUN XWH2CmpLoopcnn3
                        BUN XWH3CmpLoopcnn3
                         / ) {
                        XWH2CmpLoopcnn3,
                            LDA T1
                            CLE
                            CIL
                            STA T1
                            CLA
                            CIL
                            STA T3
                            LDA T2
                            CLE
                            CIL
                            STA T2
                            CLA
                            CIL
                            STA T4

                             / > if t3pt4is1cnn3
                             / if (
                                LDA T3
                                ADD T4
                                STA T3
                                LDA T3
                                CMA
                                INC
                                CMA
                                STA T3
                                LDA T3
                            SZA
                            BUN XIF2t3pt4is1cnn3
                            BUN XIF1t3pt4is1cnn3
                             / ) {
                            XIF1t3pt4is1cnn3,
                                LDA T4
                                STA CMPRES
                                BUN EndCp1Cp2cnn3
                             / }
                            XIF2t3pt4is1cnn3,
                             / < end of if t3pt4is1cnn3

                        BUN XWH1CmpLoopcnn3
                         / }
                        XWH3CmpLoopcnn3,
                         / < end of while loop CmpLoopcnn3

                        CLA
                        STA CMPRES
                        EndCp1Cp2cnn3,
                     / < end of cnn3

                    LDA CMPRES
                SZA
                BUN XIF2DivCmp
                BUN XIF1DivCmp
                 / ) {
                XIF1DivCmp,
                    LDA ISH
                    CMA
                    INC
                    STA T4
                    LDA ITMP
                    ADD T4
                    STA ITMP
                 / }
                XIF2DivCmp,
                 / < end of if DivCmp

                LDA ISH
                CLE
                CIR
                STA ISH
                LDA IPTR
                CLE
                CIR
                STA IPTR
            BUN XWH1CPMain
             / }
            XWH3CPMain,
             / < end of while loop CPMain

            LDA ITMP
            STA NC2

             / > if CPBreak
             / if (
                LDA NC2
            SZA
            BUN XIF2CPBreak
            BUN XIF1CPBreak
             / ) {
            XIF1CPBreak,
                BUN L1
             / }
            XIF2CPBreak,
             / < end of if CPBreak

            LDA I
            CLE
            CIL
            STA T1
            LDA T1
            INC
            STA T1
            LDA I2
            ADD T1
            STA I2
            LDA I
            INC
            STA I
            LDA MI
            CMA
            INC
            CMA
            STA MI
        BUN XWH1CPLoop
         / }
        XWH3CPLoop,
         / < end of while loop CPLoop

        _M_, HLT
     / < end of CP

    L1,
    LDA N
    CMA
    INC
    CMA
    STA N
BUN XWH1MainLoop
 / }
XWH3MainLoop,
 / < end of while loop MainLoop

_M_, HLT


N, DEC 65535
NC1, DEC 0
NC2, DEC 0
IINIT, DEC 2
I2INIT, DEC 4
I, DEC 0
MI, DEC 0
I2, DEC 0
T1, DEC 0
T2, DEC 0
T3, DEC 0
T4, DEC 0
ISH, DEC 0
IPTR, DEC 0
ITMP, DEC 0
TFLAG, DEC 0
CMPRES, DEC 0
END

