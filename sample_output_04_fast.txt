ORG 10 / Entry Point

 / > while loop MainLoop
XWH1MainLoop,
 / while (
    LDA N
SZA
BUN XWH2MainLoop
BUN XWH3MainLoop
 / ) {
XWH2MainLoop,

     / > beginning of CP
    CP,
        LDA IINIT
        STA I
        LDA IINIT
        CMA
        INC
        STA MI
        LDA I2INIT
        STA I2

         / > while loop CPLoop
        XWH1CPLoop,
         / while (
            CLA
            INC
            STA TEMP2
            LDA I2
            CMA
            STA TEMP1
            LDA TEMP1
            ADD TEMP2
            STA TEMP1
            CLA
            CIL
            STA TEMP2
            LDA TEMP1
            ADD N
            CLA
            CIL
            ADD TEMP2
        SZA
        BUN XWH2CPLoop
        BUN XWH3CPLoop
         / ) {
        XWH2CPLoop,
            LDA N
            STA NC2
            CLA
            STA IPTR
            LDA IPTR
            INC
            STA IPTR
            LDA I
            STA ISH
            LDA N
            STA ITMP

             / > while loop CPPre
            XWH1CPPre,
             / while (
                LDA ISH
                CIL
                CLA
                CIL
            SZA
            BUN XWH3CPPre
            BUN XWH2CPPre
             / ) {
            XWH2CPPre,
                LDA ISH
                CLE
                CIL
                STA ISH
                LDA IPTR
                CLE
                CIL
                STA IPTR
            BUN XWH1CPPre
             / }
            XWH3CPPre,
             / < end of while loop CPPre


             / > while loop CPMain
            XWH1CPMain,
             / while (
                CLA
                INC
                STA TEMP2
                LDA I
                CMA
                STA TEMP1
                LDA TEMP1
                ADD TEMP2
                STA TEMP1
                CLA
                CIL
                STA TEMP2
                LDA TEMP1
                ADD ISH
                CLA
                CIL
                ADD TEMP2
            SZA
            BUN XWH2CPMain
            BUN XWH3CPMain
             / ) {
            XWH2CPMain,

                 / > if DivCmp
                 / if (
                    CLA
                    INC
                    STA TEMP2
                    LDA ISH
                    CMA
                    STA TEMP1
                    LDA TEMP1
                    ADD TEMP2
                    STA TEMP1
                    CLA
                    CIL
                    STA TEMP2
                    LDA TEMP1
                    ADD ITMP
                    CLA
                    CIL
                    ADD TEMP2
                SZA
                BUN XIF1DivCmp
                BUN XIF2DivCmp
                 / ) {
                XIF1DivCmp,
                    LDA ISH
                    CMA
                    INC
                    STA TEMP1
                    LDA ITMP
                    ADD TEMP1
                    STA ITMP
                 / }
                XIF2DivCmp,
                 / < end of if DivCmp

                LDA ISH
                CLE
                CIR
                STA ISH
                LDA IPTR
                CLE
                CIR
                STA IPTR
            BUN XWH1CPMain
             / }
            XWH3CPMain,
             / < end of while loop CPMain

            LDA ITMP
            STA NC2

             / > if CPBreak
             / if (
                LDA NC2
            SZA
            BUN XIF2CPBreak
            BUN XIF1CPBreak
             / ) {
            XIF1CPBreak,
                BUN L1
             / }
            XIF2CPBreak,
             / < end of if CPBreak

            LDA I
            CLE
            CIL
            STA TEMP1
            LDA TEMP1
            INC
            STA TEMP1
            LDA I2
            ADD TEMP1
            STA I2
            LDA I
            INC
            STA I
            LDA MI
            CMA
            INC
            CMA
            STA MI
        BUN XWH1CPLoop
         / }
        XWH3CPLoop,
         / < end of while loop CPLoop

        _M_, HLT
     / < end of CP

    L1,
    LDA N
    CMA
    INC
    CMA
    STA N
BUN XWH1MainLoop
 / }
XWH3MainLoop,
 / < end of while loop MainLoop

_M_, HLT


    N, DEC 65535
    NC2, DEC 0
    IINIT, DEC 2
    I2INIT, DEC 4
    I, DEC 0
    ITMP, DEC 0
    MI, DEC 0
    I2, DEC 0
    ISH, DEC 0
    IPTR, DEC 0
    TEMP1, DEC 0
    TEMP2, DEC 0
END

