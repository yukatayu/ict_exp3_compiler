ORG 10 / Entry Point

 / > while loop MainLoop
XWH1MainLoop,
 / while (
    LDA N
SZA
BUN XWH2MainLoop
BUN XWH3MainLoop
 / ) {
XWH2MainLoop,

     / > beginning of CP
    CP,
        LDA IINIT
        STA I
        LDA IINIT
        CMA
        INC
        STA MI
        LDA I2INIT
        STA I2

         / > while loop CPLoop
        XWH1CPLoop,
         / while (
            LDA N
            STA NC1
            LDA I2
            STA NC2

             / > beginning of cnn0
            cnn0,
                CLA
                INC
                STA CMPRES

                 / > if Cmpcnn0
                 / if (
                    LDA NC2
                SZA
                BUN XIF1Cmpcnn0
                BUN XIF2Cmpcnn0
                 / ) {
                XIF1Cmpcnn0,
                    LDA NC2
                    CMA
                    INC
                    STA TEMP
                    CLE
                    LDA TEMP
                    ADD NC1
                    CLA
                    CIL
                    STA CMPRES
                 / }
                XIF2Cmpcnn0,
                 / < end of if Cmpcnn0

             / < end of cnn0

            LDA CMPRES
        SZA
        BUN XWH2CPLoop
        BUN XWH3CPLoop
         / ) {
        XWH2CPLoop,
            LDA N
            STA NC1
            LDA N
            STA NC2
            CLA
            STA IPTR
            LDA IPTR
            INC
            STA IPTR
            LDA I
            STA ISH
            LDA N
            STA ITMP

             / > while loop CPPre
            XWH1CPPre,
             / while (
                LDA ISH
                CIL
                CLA
                CIL
            SZA
            BUN XWH3CPPre
            BUN XWH2CPPre
             / ) {
            XWH2CPPre,
                LDA ISH
                CLE
                CIL
                STA ISH
                LDA IPTR
                CLE
                CIL
                STA IPTR
            BUN XWH1CPPre
             / }
            XWH3CPPre,
             / < end of while loop CPPre


             / > while loop CPMain
            XWH1CPMain,
             / while (
                LDA ISH
                STA NC1
                LDA I
                STA NC2

                 / > beginning of cnn2
                cnn2,
                    CLA
                    INC
                    STA CMPRES

                     / > if Cmpcnn2
                     / if (
                        LDA NC2
                    SZA
                    BUN XIF1Cmpcnn2
                    BUN XIF2Cmpcnn2
                     / ) {
                    XIF1Cmpcnn2,
                        LDA NC2
                        CMA
                        INC
                        STA TEMP
                        CLE
                        LDA TEMP
                        ADD NC1
                        CLA
                        CIL
                        STA CMPRES
                     / }
                    XIF2Cmpcnn2,
                     / < end of if Cmpcnn2

                 / < end of cnn2

                LDA CMPRES
            SZA
            BUN XWH2CPMain
            BUN XWH3CPMain
             / ) {
            XWH2CPMain,

                 / > if DivCmp
                 / if (
                    LDA ITMP
                    STA NC1
                    LDA ISH
                    STA NC2

                     / > beginning of cnn3
                    cnn3,
                        CLA
                        INC
                        STA CMPRES

                         / > if Cmpcnn3
                         / if (
                            LDA NC2
                        SZA
                        BUN XIF1Cmpcnn3
                        BUN XIF2Cmpcnn3
                         / ) {
                        XIF1Cmpcnn3,
                            LDA NC2
                            CMA
                            INC
                            STA TEMP
                            CLE
                            LDA TEMP
                            ADD NC1
                            CLA
                            CIL
                            STA CMPRES
                         / }
                        XIF2Cmpcnn3,
                         / < end of if Cmpcnn3

                     / < end of cnn3

                    LDA CMPRES
                SZA
                BUN XIF1DivCmp
                BUN XIF2DivCmp
                 / ) {
                XIF1DivCmp,
                    LDA ISH
                    CMA
                    INC
                    STA TEMP
                    LDA ITMP
                    ADD TEMP
                    STA ITMP
                 / }
                XIF2DivCmp,
                 / < end of if DivCmp

                LDA ISH
                CLE
                CIR
                STA ISH
                LDA IPTR
                CLE
                CIR
                STA IPTR
            BUN XWH1CPMain
             / }
            XWH3CPMain,
             / < end of while loop CPMain

            LDA ITMP
            STA NC2

             / > if CPBreak
             / if (
                LDA NC2
            SZA
            BUN XIF2CPBreak
            BUN XIF1CPBreak
             / ) {
            XIF1CPBreak,
                BUN L1
             / }
            XIF2CPBreak,
             / < end of if CPBreak

            LDA I
            CLE
            CIL
            STA TEMP
            LDA TEMP
            INC
            STA TEMP
            LDA I2
            ADD TEMP
            STA I2
            LDA I
            INC
            STA I
            LDA MI
            CMA
            INC
            CMA
            STA MI
        BUN XWH1CPLoop
         / }
        XWH3CPLoop,
         / < end of while loop CPLoop

        _M_, HLT
     / < end of CP

    L1,
    LDA N
    CMA
    INC
    CMA
    STA N
BUN XWH1MainLoop
 / }
XWH3MainLoop,
 / < end of while loop MainLoop

_M_, HLT


N, DEC 65535
NC1, DEC 0
NC2, DEC 0
IINIT, DEC 2
I2INIT, DEC 4
I, DEC 0
MI, DEC 0
I2, DEC 0
TEMP, DEC 0
ISH, DEC 0
IPTR, DEC 0
ITMP, DEC 0
TFLAG, DEC 0
CMPRES, DEC 0
END

