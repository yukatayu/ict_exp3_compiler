ORG 10 / Entry Point

 / > while loop MainLoop
XWH1MainLoop,
 / while (
    LDA N
SZA
BUN XWH2MainLoop
BUN XWH3MainLoop
 / ) {
XWH2MainLoop,

     / > beginning of CP
    CP,
        LDA IINIT
        STA I
        LDA IINIT
        CMA
        INC
        STA MI
        LDA I2INIT
        STA I2

         / > while loop CPLoop
        XWH1CPLoop,
         / while (
            LDA N
            STA NC1
            LDA I2
            STA NC2

             / > beginning of cnn0
            cnn0,
                CLA
                INC
                STA CMPRES

                 / > if Cmpcnn0
                 / if (
                    LDA NC2
                SZA
                BUN XIF1Cmpcnn0
                BUN XIF2Cmpcnn0
                 / ) {
                XIF1Cmpcnn0,
                    LDA NC2
                    CMA
                    INC
                    STA CMPTMP
                    CLE
                    LDA CMPTMP
                    ADD NC1
                    CLA
                    CIL
                    STA CMPRES
                 / }
                XIF2Cmpcnn0,
                 / < end of if Cmpcnn0

             / < end of cnn0

            LDA CMPRES
        SZA
        BUN XWH2CPLoop
        BUN XWH3CPLoop
         / ) {
        XWH2CPLoop,
            LDA N
            STA NC1
            LDA N
            STA NC2
            LDA NC1
            ADD MI
            STA NC1

             / > while loop CPLoop2
            XWH1CPLoop2,
             / while (

                 / > beginning of cnn1
                cnn1,
                    CLA
                    INC
                    STA CMPRES

                     / > if Cmpcnn1
                     / if (
                        LDA NC2
                    SZA
                    BUN XIF1Cmpcnn1
                    BUN XIF2Cmpcnn1
                     / ) {
                    XIF1Cmpcnn1,
                        LDA NC2
                        CMA
                        INC
                        STA CMPTMP
                        CLE
                        LDA CMPTMP
                        ADD NC1
                        CLA
                        CIL
                        STA CMPRES
                     / }
                    XIF2Cmpcnn1,
                     / < end of if Cmpcnn1

                 / < end of cnn1

                LDA CMPRES
            SZA
            BUN XWH3CPLoop2
            BUN XWH2CPLoop2
             / ) {
            XWH2CPLoop2,
                LDA NC1
                STA NC2
                LDA NC1
                ADD MI
                STA NC1
            BUN XWH1CPLoop2
             / }
            XWH3CPLoop2,
             / < end of while loop CPLoop2


             / > if CPBreak
             / if (
                LDA NC2
            SZA
            BUN XIF2CPBreak
            BUN XIF1CPBreak
             / ) {
            XIF1CPBreak,
                BUN L1
             / }
            XIF2CPBreak,
             / < end of if CPBreak

            LDA I
            CLE
            CIL
            STA T1
            LDA T1
            INC
            STA T1
            LDA I2
            ADD T1
            STA I2
            LDA I
            INC
            STA I
            LDA MI
            CMA
            INC
            CMA
            STA MI
        BUN XWH1CPLoop
         / }
        XWH3CPLoop,
         / < end of while loop CPLoop

        _M_, HLT
     / < end of CP

    L1,
    LDA N
    CMA
    INC
    CMA
    STA N
BUN XWH1MainLoop
 / }
XWH3MainLoop,
 / < end of while loop MainLoop

_M_, HLT


N, DEC 65535
NC1, DEC 0
NC2, DEC 0
IINIT, DEC 2
I2INIT, DEC 4
I, DEC 0
MI, DEC 0
I2, DEC 0
CMPTMP, DEC 0
T1, DEC 0
T2, DEC 0
T3, DEC 0
T4, DEC 0
TFLAG, DEC 0
CMPRES, DEC 0
END

